# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ —Ä–æ–±–æ—Ç—ñ –∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ —Ç–æ–≤–∞—Ä—ñ–≤

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

–ú–æ–¥—É–ª—å `sync1c` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —ñ –ø—Ä–∏–≤'—è–∑—É—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ —Ç–æ–≤–∞—Ä—ñ–≤ **–ø–æ –Ω–∞–∑–≤—ñ —Ç–æ–≤–∞—Ä—É**.

–í–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∑–∏–≤–∞—î—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—î—é –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—É, –∞ –º–æ–¥—É–ª—å —Å–∞–º –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.

---

## –ö—Ä–æ–∫ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞–ø–∫—É –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–æ–≤–∞—Ä—ñ–≤:
```
/home/user/eco-kray/image/catalog/products/
```

–í—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤ —Ü—é –ø–∞–ø–∫—É –Ω–∞ FTP.

---

## –ö—Ä–æ–∫ 2: –Ø–∫ –Ω–∞–∑–∏–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

### –ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ—Å—Çe:
**–ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É = —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—è –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—É**

### –ü—Ä–∏–∫–ª–∞–¥–∏:

| –ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É | –ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è |
|--------------|------------------------|
| –°—ñ–∫ —è–±–ª—É—á–Ω–∏–π 1–ª | `sok-yabluchnyi-1l.jpg` |
| –ü–∞—Å—Ç–∏–ª–∞ –≤–∏—à–Ω–µ–≤–∞ 50–≥ | `pastila-vyshnev–∞-50g.jpg` |
| –ë–µ—Ä–µ–∑–æ–≤–∏–π —Å—ñ–∫ 0.5–ª | `berezovyi-sok-0-5l.jpg` |
| –î–∂–µ–º –ø–æ–ª—É–Ω–∏—á–Ω–∏–π | `dzhem-polunychnyi.jpg` |
| –£–∑–≤–∞—Ä –∑ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ñ–≤ | `uzvar-z-sukhofruktiv.jpg` |

### –ü—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó:
- –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –∫–∏—Ä–∏–ª–∏—Ü—è ‚Üí –ª–∞—Ç–∏–Ω–∏—Ü—è
- –ü—Ä–æ–±—ñ–ª–∏ ‚Üí –¥–µ—Ñ—ñ—Å–∏ (-)
- –í—Å—ñ –º–∞–ª–µ–Ω—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏
- –°–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏ –∑–∞–º—ñ–Ω—é—é—Ç—å—Å—è –Ω–∞ –¥–µ—Ñ—ñ—Å–∏

**–ü—Ä–∏–∫–ª–∞–¥–∏ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó:**
- `—ñ` ‚Üí `i`
- `—ó` ‚Üí `yi`
- `—î` ‚Üí `ye`
- `“ë` ‚Üí `g`

---

## –ö—Ä–æ–∫ 3: –§–æ—Ä–º–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è —Ñ–æ—Ä–º–∞—Ç–∏:
- `.jpg` / `.jpeg`
- `.png`
- `.webp`

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —à—É–∫–∞—î —Ñ–∞–π–ª –∑ –±—É–¥—å-—è–∫–∏–º –∑ —Ü–∏—Ö —Ä–æ–∑—à–∏—Ä–µ–Ω—å.

---

## –ö—Ä–æ–∫ 4: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

1. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ FTP –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É: `/image/catalog/products/`
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –Ω–∞–∑–≤–∞–º–∏

**–ü—Ä–∏–∫–ª–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏:**
```
/image/catalog/products/
‚îú‚îÄ‚îÄ sok-yabluchnyi-1l.jpg
‚îú‚îÄ‚îÄ sok-yabluchnyi-1l-2.jpg  (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
‚îú‚îÄ‚îÄ pastila-vyshnev–∞.jpg
‚îú‚îÄ‚îÄ berezovyi-sok.png
‚îú‚îÄ‚îÄ dzhem-polunychnyi.webp
‚îî‚îÄ‚îÄ uzvar-z-sukhofruktiv.jpg
```

---

## –ö—Ä–æ–∫ 5: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

–ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –Ω–∞ FTP:

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é –∑ 1–° (—è–∫ –∑–∞–∑–≤–∏—á–∞–π)
2. –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∞–π–¥–µ —ñ –ø—Ä–∏–≤'—è–∂–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥: `/storage/logs/sync1c.log`

–í –ª–æ–≥–∞—Ö –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
```
--- Image Linking Started ---
Product ID: 123, Name: –°—ñ–∫ —è–±–ª—É—á–Ω–∏–π 1–ª
Generated base filename: sok-yabluchnyi-1l
Found exact match: sok-yabluchnyi-1l.jpg
SUCCESS: Image linked - catalog/products/sok-yabluchnyi-1l.jpg
--- Image Linking Completed ---
```

---

## –í–∞—Ä—ñ–∞–Ω—Ç–∏ –Ω–∞–∑–≤ (Pattern Matching)

–Ø–∫—â–æ —Ç–æ—á–Ω–æ—ó –Ω–∞–∑–≤–∏ –Ω–µ–º–∞—î, –º–æ–¥—É–ª—å –∑–Ω–∞–π–¥–µ —Ñ–∞–π–ª —â–æ **–ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è** –∑ –±–∞–∑–æ–≤–æ—ó –Ω–∞–∑–≤–∏:

**–ü—Ä–∏–∫–ª–∞–¥:**
- –¢–æ–≤–∞—Ä: `–°—ñ–∫ —è–±–ª—É—á–Ω–∏–π 1–ª`
- –ë–∞–∑–æ–≤–∞ –Ω–∞–∑–≤–∞: `sok-yabluchnyi-1l`
- –ó–Ω–∞–π–¥–µ –±—É–¥—å-—è–∫–∏–π –∑:
  - `sok-yabluchnyi-1l.jpg` ‚úì
  - `sok-yabluchnyi-1l-main.jpg` ‚úì
  - `sok-yabluchnyi-1l-front.jpg` ‚úì
  - `sok-yabluchnyi-1l-2.png` ‚úì

---

## –†—É—á–Ω–µ –ø—Ä–∏–≤'—è–∑—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤'—è–∑–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –≤—Å—ñ—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –æ–¥—Ä–∞–∑—É:

```php
// –í –∞–¥–º—ñ–Ω—Ü—ñ –∞–±–æ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
$imageLinker = new Sync1CImageLinker($db, $log, 'catalog/products/');
$stats = $imageLinker->linkAllProducts();

echo "Linked: {$stats['linked']}\n";
echo "Not found: {$stats['not_found']}\n";
echo "Total: {$stats['total']}\n";
```

---

## –ó–º—ñ–Ω–∞ –ø–∞–ø–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `catalog/products/`

–©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞–ø–∫—É, –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –≤ `sync1c.php`:

```php
// –ë—É–ª–æ:
$imageLinker = new Sync1CImageLinker($this->db, $this->log, 'catalog/products/');

// –°—Ç–∞–ª–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥):
$imageLinker = new Sync1CImageLinker($this->db, $this->log, 'catalog/1c-products/');
```

---

## –ü–æ—Ä–∞–¥–∏

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
- –ù–∞–∑–∏–≤–∞–π—Ç–µ —Ñ–∞–π–ª–∏ –∑—Ä–æ–∑—É–º—ñ–ª–æ: `sok-yabluchnyi-1l.jpg`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–∞–ª–µ–Ω—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏
- –ó–∞–º—ñ–Ω—é–π—Ç–µ –ø—Ä–æ–±—ñ–ª–∏ –Ω–∞ –¥–µ—Ñ—ñ—Å–∏

### ‚ùå –ù–ï –ü–†–ê–í–ò–õ–¨–ù–û:
- `IMG_1234.jpg` - –Ω–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
- `–°—ñ–∫ —è–±–ª—É—á–Ω–∏–π.jpg` - –∫–∏—Ä–∏–ª–∏—Ü—è, –ø—Ä–æ–±—ñ–ª–∏
- `sok_yabluchnyi.jpg` - –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è (–∫—Ä–∞—â–µ –¥–µ—Ñ—ñ—Å)

---

## –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π—à–ª–æ—Å—å?

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É:
   - –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—è?
   - –ß–∏ –≤—Å—ñ –º–∞–ª–µ–Ω—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏?
   - –ß–∏ —î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è (.jpg, .png, .webp)?

2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞–ø–∫—É:
   - –ß–∏ —ñ—Å–Ω—É—î `/image/catalog/products/`?
   - –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É? (755)

3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥:
   ```bash
   tail -f /home/user/eco-kray/storage/logs/sync1c.log
   ```

4. –í –ª–æ–≥—É –±—É–¥–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
   ```
   Expected filename pattern: catalog/products/sok-yabluchnyi-1l.{jpg|jpeg|png|webp}
   ```
   –¶–µ –ø—ñ–¥–∫–∞–∂–µ —è–∫—É –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –æ—á—ñ–∫—É—î –º–æ–¥—É–ª—å.

---

## –ü—ñ–¥—Å—É–º–æ–∫

1. ‚úÖ –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞–ø–∫—É `/image/catalog/products/`
2. ‚úÖ –ù–∞–∑–≤—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—î—é –Ω–∞–∑–≤–∏ —Ç–æ–≤–∞—Ä—É
3. ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –Ω–∞ FTP
4. ‚úÖ –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é 1–°
5. ‚úÖ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏–≤'—è–∂—É—Ç—å—Å—è!

**–ù—ñ—è–∫–∏—Ö GUID —á–∏ SKU –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ!** –ü—Ä–æ—Å—Ç–æ –∑—Ä–æ–∑—É–º—ñ–ª—ñ –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—ñ–≤. üéâ
